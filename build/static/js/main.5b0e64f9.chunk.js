(window.webpackJsonpminiapp=window.webpackJsonpminiapp||[]).push([[0],{185:function(e,t,n){e.exports=n(301)},274:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){},288:function(e,t,n){var a={"./Story_green.png":289,"./Story_red.png":290,"./Story_yellow.png":291};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=288},289:function(e,t,n){e.exports=n.p+"static/media/Story_green.22e92e35.png"},290:function(e,t,n){e.exports=n.p+"static/media/Story_red.a4a904ab.png"},291:function(e,t,n){e.exports=n.p+"static/media/Story_yellow.48c23ca0.png"},292:function(e,t,n){e.exports=n.p+"static/media/group_subscribe.9ba1c89b.png"},293:function(e,t,n){var a={"./0.png":294,"./1.png":295,"./2.png":296,"./progress.png":96};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=293},294:function(e,t,n){e.exports=n.p+"static/media/0.ac9740c6.png"},295:function(e,t,n){e.exports=n.p+"static/media/1.8bfb2c27.png"},296:function(e,t,n){e.exports=n.p+"static/media/2.35968bce.png"},297:function(e,t,n){var a={"./green.png":49,"./red.png":298,"./yellow.png":299};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=297},298:function(e,t,n){e.exports=n.p+"static/media/red.0762d7f4.png"},299:function(e,t,n){e.exports=n.p+"static/media/yellow.a33fb1eb.png"},300:function(e,t,n){e.exports=n.p+"static/media/vk_acc_price.b7b5e20c.png"},301:function(e,t,n){"use strict";n.r(t);n(186),n(212),n(214),n(215),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(226),n(227),n(228),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254);var a=n(0),r=n.n(a),o=n(50),c=n.n(o),s=(n(262),n(21)),i=(n(274),n(275),n(276),n(40)),l=n(6),u=n.n(l),p=n(14),d=n(51),f=n(52),m=n(56),h=n(54),v=n(53),b=n(57),g=n(11),y=n.n(g),C=(n(278),n(55));n(279);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(C.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.before,n=e.after,a=e.children,o=e.style,c=e.onClick,s=e.className,i={paddingLeft:6,color:"rgba(87, 64, 57, 0.6)"};return r.a.createElement("div",{className:"CustomButton"+(s?" ".concat(s):""),style:o,onClick:c},t&&r.a.cloneElement(t,{style:x({},t.props.style,{paddingRight:10})}),r.a.createElement("span",null,a),n&&("object"===typeof n?r.a.cloneElement(n,{style:i}):r.a.createElement("span",{style:i},n)))}}]),t}(a.PureComponent);function S(e,t,a){var r=(0,n(95).createCanvas)(1080,1920).getContext("2d");r.font=t;for(var o,c,s,i=0,l=[];e.length;){for(c=e.length;r.measureText(e.substr(0,c)).width>a;c--);if(o=e.substr(0,c),c!==e.length)for(s=0;-1!==o.indexOf(" ",s);s=o.indexOf(" ",s)+1);l.push(o.substr(0,s||o.length)),i=Math.max(i,r.measureText(l[l.length-1]).width),e=e.substr(l[l.length-1].length,e.length)}return l}function O(e,t){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n?"?"+Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])})).join("&"):"",r="".concat(t).concat(a),e.next=3,new Promise((function(e,t){fetch(r,{method:"GET"}).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(t){return e({error:{code:-1,text:t.toString()}})}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=["SF Pro Text","SF Pro Text Heavy","SF Pro Text Semibold","SF Pro Display","SF Pro Display Bold","SF Pro Display Semibold","SF Pro Display Medium","SF Pro Rounded","SF Pro Rounded Semibold","SF Pro Rounded Bold","SF UI Display","SF UI Text","TT Commons","TT Commons Bold","Manrope ExtraBold"];function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=!0,n=!1,a=void 0;try{for(var r,o=function(){var e=r.value,t=document.createElement("span");t.style.fontFamily=e,t.innerText=".",document.body.appendChild(t),setTimeout((function(){return t.remove()}),1)},c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0)o()}catch(s){n=!0,a=s}finally{try{t||null==c.return||c.return()}finally{if(n)throw a}}}function j(e,t){return Math.floor(Math.random()*(t-e+1))+e}function M(){return window.location.search.length>0&&JSON.parse('{"'+decodeURI(window.location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}function A(e){var t=document.createElement("a");t.href=e,t.target="_blank",t.click(),t.remove()}var N=n(302);function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function F(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var I=r.a.createElement("path",{d:"M19.5715 12.3423C19.1371 12.2034 18.6951 12.0891 18.2478 12C18.6951 11.9109 19.1371 11.7966 19.5715 11.6577C20.4762 11.4543 21.3227 10.9786 22.0204 10.2811C23.7702 8.53187 24.0013 5.91657 22.5355 4.45123C22.0025 3.91846 21.2889 3.58914 20.4979 3.50495C20.4137 2.71435 20.0842 2.00084 19.5513 1.46812C18.8311 0.748101 17.8204 0.411497 16.7049 0.519929C15.6176 0.625774 14.5573 1.14532 13.7194 1.98297C13.0217 2.68047 12.5458 3.52665 12.3424 4.4311C12.2034 4.86536 12.0891 5.30712 12 5.75428C11.9109 5.30712 11.7966 4.86536 11.6576 4.4311C11.4542 3.52665 10.9783 2.68047 10.2806 1.98297C9.44267 1.14532 8.38248 0.625774 7.2951 0.519929C6.18003 0.411497 5.16892 0.748053 4.44865 1.46822C3.9158 2.00084 3.58632 2.71401 3.5021 3.50495C2.71124 3.58914 1.99749 3.91846 1.46454 4.45123C-0.00129634 5.91657 0.229781 8.53187 1.97956 10.2811C2.6773 10.9786 3.52377 11.4543 4.42847 11.6577C4.86293 11.7966 5.30489 11.9109 5.75224 12C5.30489 12.0891 4.86293 12.2034 4.42847 12.3423C3.52377 12.5456 2.6773 13.0213 1.97956 13.7188C0.229781 15.4681 -0.00129616 18.0834 1.46468 19.5487C1.99759 20.0815 2.71124 20.4108 3.50225 20.495C3.58646 21.2856 3.91594 21.9991 4.4488 22.5318C5.16906 23.2518 6.17984 23.5886 7.29525 23.48C8.38252 23.3742 9.44257 22.8546 10.2807 22.017C10.9785 21.3195 11.4543 20.4733 11.6577 19.5689C11.7967 19.1346 11.9109 18.6928 12 18.2457C12.0891 18.6928 12.2034 19.1346 12.3424 19.5689C12.5458 20.4733 13.0217 21.3195 13.7194 22.017C14.5573 22.8546 15.6175 23.3742 16.7049 23.48C16.8421 23.4934 16.9775 23.5 17.1112 23.5C18.0643 23.5 18.9197 23.1633 19.5513 22.5318C20.0842 21.9991 20.4137 21.2857 20.4979 20.495C21.2888 20.4108 22.0026 20.0815 22.5355 19.5487C24.0013 18.0834 23.7702 15.4681 22.0204 13.7188C21.3227 13.0213 20.4762 12.5456 19.5715 12.3423Z",fill:"white"}),D=function(e){var t=e.svgRef,n=e.title,a=F(e,["svgRef","title"]);return r.a.createElement("svg",T({width:24,height:24,viewBox:"0 0 24 24",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,I)},W=r.a.forwardRef((function(e,t){return r.a.createElement(D,T({svgRef:t},e))}));n.p;function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function B(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var K=r.a.createElement("path",{d:"M15 0C6.74004 0 0 6.74115 0 15C0 23.26 6.74115 30 15 30C23.26 30 30 23.2588 30 15C30 6.74004 23.2588 0 15 0ZM26.6628 8.73328L22.5954 10.5821C21.8286 9.26883 20.7312 8.17143 19.4179 7.40461L21.2667 3.33721C23.5494 4.56867 25.4313 6.45064 26.6628 8.73328ZM22.0312 15C22.0312 18.877 18.877 22.0312 15 22.0312C11.123 22.0312 7.96875 18.877 7.96875 15C7.96875 11.123 11.123 7.96875 15 7.96875C18.877 7.96875 22.0312 11.123 22.0312 15ZM15 1.75781C16.6421 1.75781 18.215 2.0591 19.6673 2.60795L17.8189 6.67453C16.9337 6.374 15.9855 6.21094 15 6.21094C14.0145 6.21094 13.0663 6.374 12.1811 6.67453L10.3327 2.60795C11.785 2.0591 13.3579 1.75781 15 1.75781ZM8.73334 3.33721L10.5821 7.40461C9.26889 8.17143 8.17148 9.26883 7.40467 10.5821L3.33727 8.73328C4.56867 6.45064 6.45064 4.56867 8.73334 3.33721ZM1.75781 15C1.75781 13.3579 2.0591 11.785 2.60795 10.3327L6.67453 12.1812C6.374 13.0663 6.21094 14.0145 6.21094 15C6.21094 15.9855 6.374 16.9337 6.67453 17.8188L2.60795 19.6673C2.0591 18.215 1.75781 16.6421 1.75781 15ZM3.33721 21.2667L7.40461 19.4179C8.17143 20.7311 9.26883 21.8286 10.5821 22.5953L8.73328 26.6627C6.45064 25.4313 4.56867 23.5494 3.33721 21.2667ZM15 28.2422C13.3579 28.2422 11.785 27.9409 10.3327 27.392L12.1811 23.3255C13.0663 23.626 14.0145 23.7891 15 23.7891C15.9855 23.7891 16.9337 23.626 17.8189 23.3255L19.6673 27.392C18.215 27.9409 16.6421 28.2422 15 28.2422ZM21.2667 26.6628L19.4179 22.5954C20.7311 21.8286 21.8286 20.7312 22.5953 19.4179L26.6627 21.2667C25.4313 23.5494 23.5494 25.4313 21.2667 26.6628ZM23.3255 17.8188C23.626 16.9337 23.7891 15.9855 23.7891 15C23.7891 14.0145 23.626 13.0663 23.3255 12.1812L27.392 10.3327C27.9409 11.785 28.2422 13.3579 28.2422 15C28.2422 16.6421 27.9409 18.215 27.392 19.6673L23.3255 17.8188Z",fill:"white"}),L=r.a.createElement("path",{d:"M14.0274 16.3824C14.0274 16.0643 14.1252 15.7606 14.3207 15.4714C14.5237 15.1822 14.7418 14.9508 14.9749 14.7773C15.208 14.5965 15.4223 14.3869 15.6178 14.1483C15.8209 13.9097 15.9224 13.6711 15.9224 13.4325C15.9224 13.1794 15.8322 12.9842 15.6517 12.8468C15.4712 12.7095 15.2193 12.6408 14.8959 12.6408C14.2643 12.6408 13.8169 12.9625 13.5537 13.606L12.2227 12.8685C12.4483 12.3335 12.8054 11.9214 13.2942 11.6322C13.7905 11.3357 14.3432 11.1875 14.9523 11.1875C15.6366 11.1875 16.227 11.3791 16.7233 11.7623C17.2271 12.1383 17.479 12.6588 17.479 13.324C17.479 13.6277 17.4113 13.9097 17.276 14.1699C17.1481 14.4302 16.9902 14.6544 16.8022 14.8424C16.6217 15.0231 16.4375 15.1966 16.2495 15.3629C16.069 15.522 15.9111 15.6883 15.7758 15.8618C15.6479 16.0353 15.584 16.2089 15.584 16.3824H14.0274ZM15.4825 18.8009C15.2945 18.9816 15.0689 19.072 14.8057 19.072C14.5425 19.072 14.3169 18.9816 14.1289 18.8009C13.9409 18.6201 13.8469 18.4032 13.8469 18.1502C13.8469 17.8971 13.9409 17.6802 14.1289 17.4994C14.3169 17.3187 14.5425 17.2283 14.8057 17.2283C15.0689 17.2283 15.2945 17.3187 15.4825 17.4994C15.6705 17.6802 15.7645 17.8971 15.7645 18.1502C15.7645 18.4032 15.6705 18.6201 15.4825 18.8009Z",fill:"white"}),R=function(e){var t=e.svgRef,n=e.title,a=B(e,["svgRef","title"]);return r.a.createElement("svg",V({width:30,height:30,viewBox:"0 0 30 30",fill:"none",ref:t},a),n?r.a.createElement("title",null,n):null,K,L)},U=r.a.forwardRef((function(e,t){return r.a.createElement(R,V({svgRef:t},e))})),Z=(n.p,n(70)),J=n.n(Z),G=(n(281),["https://murmuring-bastion-20764.herokuapp.com/","https://vds2056823.my-ihor.ru:8088/"][j(0,1)]),H=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={popout:null,history:["p0"],activePanel:"p0",currentMessageIndex:0,messages:["\u0421\u0447\u0438\u0442\u0430\u0435\u043c \u0434\u0440\u0443\u0437\u0435\u0439...","\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0434\u0430\u0442\u0443 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438...","\u0410\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u0435\u043c \u043e\u0431\u0449\u0443\u044e \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043a\u0438...","\u041e\u0446\u0435\u043d\u0438\u0432\u0430\u0435\u043c \u0444\u043e\u0442\u043a\u0438...","\u0421\u043c\u043e\u0442\u0440\u0438\u043c \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0438...","\u0421\u0435\u043a\u0440\u0435\u0442\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f...","\u041e\u0446\u0435\u043d\u043a\u0430 \u043f\u043e\u0447\u0442\u0438 \u0433\u043e\u0442\u043e\u0432\u0430..."],karma:0},n.componentDidMount=n.componentDidMount.bind(Object(v.a)(n)),n.back=function(){if(null!==n.state.popout)return n.setState({popout:null}),void window.history.pushState({pop:"popout"},"Title");var e=n.state.history;1===e.length?y.a.send("VKWebAppClose",{status:"success"}):e.length>1&&(e.pop(),n.setState({activePanel:e[e.length-1],history:e,snackbar:null}))},n.go=function(e){var t=n.state.history;t[t.length-1]!==e&&(t.push(e),window.history.pushState({activePanel:e},"Title"),n.setState({activePanel:e,history:t,snackbar:null}))},n}return Object(b.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(["ProximaNova Bold","ProximaNova"]),window.addEventListener("popstate",(function(e){e.preventDefault(),t.back()})),y.a.subscribe(function(){var e=Object(p.a)(u.a.mark((function e(n){var a,r,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.detail,r=a.type,o=a.data,void 0!==r&&console.log(r,o),"VKWebAppUpdateConfig"===r?((c=document.createAttribute("scheme")).value="bright_light",document.body.attributes.setNamedItem(c),y.a.supports("VKWebAppSetViewSettings")&&y.a.send("VKWebAppSetViewSettings",{status_bar_style:"light",action_bar_color:"#050602"})):"VKWebAppViewRestore"===r&&t.setState({popout:null});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.t0=this,e.next=6,O("https://vds2056815.my-ihor.ru:8081/api/apps.get",{app_id:M().vk_app_id});case 6:e.t1=e.sent.response,e.t2={app:e.t1},e.t0.setState.call(e.t0,e.t2),y.a.send("VKWebAppInit"),y.a.send("VKWebAppEnableSwipeBack");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getToken",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.send("VKWebAppGetAuthToken",{app_id:parseInt(M().vk_app_id),scope:t});case 3:if((n=e.sent).scope.split(", ").length!==t.split(", ").length){e.next=8;break}return e.abrupt("return",n.access_token);case 8:return e.abrupt("return",!1);case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"shareStory",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getStoryCanvas();case 3:return t=e.sent,e.next=6,y.a.send("VKWebAppShowStoryBox",{background_type:"image",blob:t.toDataURL("image/png"),attachment:{text:"go_to",type:"url",url:"https://vk.com/app".concat(M().vk_app_id)}});case 6:this.state.token&&t.toBlob(function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.uploadStoryPhotoToWall(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}().bind(this)),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:this.setState({activePanel:"p7",history:["p7"]});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"getStoryCanvas",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,a,r,o,c,s,i,l,p,d,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n(95),a=t.createCanvas,r=t.loadImage,o=a(1080,1920),c=o.getContext("2d"),s=this.state,i=s.karma,l=s.result_text,e.next=10,r(n(288)("./Story_".concat(i<=333?"red":i<=667?"yellow":"green",".png")));case 10:for(f in p=e.sent,72,"72px ProximaNova",d=S(l,"72px ProximaNova",698),c.drawImage(p,0,0),c.textAlign="center",c.fillStyle="#FFFFFF",c.font="190px ProximaNova Bold",c.fillText("".concat(i,"/1000"),539.5,784.2),c.fillStyle="#2DB226",c.font="72px ProximaNova",d)c.fillText(d[f],540,951.2+77*f);return e.abrupt("return",o);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadStoryPhotoToWall",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.send("VKWebAppCallAPIMethod",{method:"photos.getWallUploadServer",params:{v:"5.126",access_token:this.state.token}});case 2:n=e.sent.response.upload_url,(a=new FormData).append("photo",t,"image.png");try{J()(G+n,{method:"POST",body:a}).then((function(e){return e.json()})).then(function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.server,a=t.photo,o=t.hash,e.next=3,y.a.send("VKWebAppCallAPIMethod",{method:"photos.saveWallPhoto",params:{server:n,photo:a,hash:o,caption:"\ud83d\ude40 \u0423\u0437\u043d\u0430\u0439 \u043a\u0430\u0440\u043c\u0443 \u0441\u0432\u043e\u0435\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 - https://vk.com/app".concat(M().vk_app_id),v:"5.126",access_token:r.state.token}});case 3:c=e.sent.response[0],y.a.send("VKWebAppShowWallPostBox",{message:"",copyright:"https://vk.com/app"+M().vk_app_id,attachments:"photo".concat(c.owner_id,"_").concat(c.id)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(o){console.error(o)}case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadStoryPhotoToAlbum",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var n,a,r,o=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.send("VKWebAppCallAPIMethod",{method:"photos.createAlbum",params:{title:"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0442\u043e\u0438\u0442 \u043c\u043e\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430",v:"5.126",access_token:this.state.token}});case 2:return n=e.sent.response.id,e.next=5,y.a.send("VKWebAppCallAPIMethod",{method:"photos.getUploadServer",params:{album_id:n,v:"5.126",access_token:this.state.token}});case 5:a=e.sent.response.upload_url,(r=new FormData).append("photo",t,"image.png");try{J()(G+a,{method:"POST",body:r}).then((function(e){return e.json()})).then(function(){var e=Object(p.a)(u.a.mark((function e(t){var a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.server,r=t.photos_list,c=t.hash,e.next=3,y.a.send("VKWebAppCallAPIMethod",{method:"photos.save",params:{album_id:n,server:a,photos_list:r,hash:c,caption:"\ud83d\ude40 \u0423\u0437\u043d\u0430\u0439 \u043a\u0430\u0440\u043c\u0443 \u0441\u0432\u043e\u0435\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 - https://vk.com/app".concat(M().vk_app_id),v:"5.126",access_token:o.state.token}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(c){console.error(c)}case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.activePanel,o=t.activeModal,c=t.popout,l=t.messages,d=t.currentMessageIndex,f=t.karma,m=t.result_text,h=t.snackbar,v=t.app,b=[{title:"\u041f\u0440\u0438\u0432\u0435\u0442!",description:"\u041c\u044b \u043e\u0446\u0435\u043d\u0438\u0432\u0430\u0435\u043c \u0442\u0432\u043e\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443, \u0441\u0447\u0438\u0442\u044b\u0432\u0430\u044f \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0440\u0430\u0437\u043d\u044b\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439. \u041e\u0446\u0435\u043d\u043a\u0430 \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043f\u0440\u043e\u043f\u043e\u0440\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0430 \u0435\u0435 \u0446\u0435\u043d\u043d\u043e\u0441\u0442\u0438.",button:r.a.createElement(w,{onClick:function(){return e.setState({activePanel:"p1"})}},"\u041e\u043a")},{title:"\u0427\u0442\u043e\u0431\u044b \u0443\u0437\u043d\u0430\u0442\u044c \u043a\u0430\u0440\u043c\u0443 \u0432\u0430\u0448\u0435\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u043d\u0430\u043c \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0432\u0430\u0448\u0438\u043c \u043b\u0438\u0447\u043d\u044b\u043c \u0434\u0430\u043d\u043d\u044b\u043c",button:r.a.createElement(w,{onClick:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=e,t.next=4,e.getToken("photos,wall");case 4:t.t1=t.sent,t.t2={activePanel:"p2",token:t.t1},t.t0.setState.call(t.t0,t.t2),t.next=14;break;case 9:if(t.prev=9,t.t3=t.catch(0),!h){t.next=13;break}return t.abrupt("return");case 13:e.setState({snackbar:r.a.createElement(s.h,{onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(N.a,{width:20,height:20})},"\u0411\u0435\u0437 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u044f \u043d\u0435 \u0441\u043c\u043e\u0433\u0443 \u043f\u0440\u043e\u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u0432\u043e\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 :(")});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})))},"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f")},{title:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0434\u043e\u0441\u0442\u0443\u043f \u043f\u043e\u043b\u0443\u0447\u0435\u043d!",button:r.a.createElement(w,{onClick:Object(p.a)(u.a.mark((function t(){var n,a,o,c,i,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.send("VKWebAppAllowMessagesFromGroup",{group_id:v.group_id_message[0],key:"FSDIfulnwje"});case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:return e.setState({activePanel:"p3",subShow:!1,popout:r.a.createElement(s.g,null)}),t.prev=8,t.next=11,y.a.send("VKWebAppShowNativeAds",{ad_format:"preloader"});case 11:t.next=15;break;case 13:t.prev=13,t.t1=t.catch(8);case 15:return e.setState({popout:null}),n=setInterval(Object(p.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.subShow){t.next=11;break}if(!((a=e.state.currentMessageIndex)>=l.length-1)){t.next=9;break}return clearInterval(n),e.go("p4"),y.a.send("VKWebAppShowNativeAds",{ad_format:"preloader"}),t.abrupt("return");case 9:e.setState({currentMessageIndex:a+1});case 10:4===a&&e.setState({subShow:!0,activeModal:"group"});case 11:case"end":return t.stop()}}),t)}))),2500),t.prev=17,t.t2=JSON,t.next=21,y.a.send("VKWebAppStorageGet",{keys:["karm1"]});case 21:return t.t3=t.sent.keys[0].value,a=t.t2.parse.call(t.t2,t.t3),t.next=25,e.setState(a);case 25:t.next=38;break;case 27:return t.prev=27,t.t4=t.catch(17),t.next=31,y.a.send("VKWebAppCallAPIMethod",{method:"users.get",params:{fields:"counters",v:"5.126",access_token:e.state.token}});case 31:return t.sent.response[0].counters,o=j(0,1e3),c=o<=333?"\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u043f\u043b\u043e\u0445\u043e \u0441\u0435\u0431\u044f \u0432\u0435\u0434\u0451\u0448\u044c \u0432 \u0441\u043e\u0446 \u0441\u0435\u0442\u0438":o<=666?"\u0422\u044b \u0432\u0435\u0434\u0451\u0448\u044c \u0441\u0435\u0431\u044f \u043d\u0435\u043f\u043b\u043e\u0445\u043e, \u043d\u043e \u0438 \u043d\u0435 \u043e\u0447\u0435\u043d\u044c \u0445\u043e\u0440\u043e\u0448\u043e \u0432 \u0441\u043e\u0446 \u0441\u0435\u0442\u0438":"\u0422\u044b \u043e\u0447\u0435\u043d\u044c \u0445\u043e\u0440\u043e\u0448\u043e \u0441\u0435\u0431\u044f \u0432\u0435\u0434\u0451\u0448\u044c \u0432 \u0441\u043e\u0446 \u0441\u0435\u0442\u0438",t.next=36,e.setState({karma:o,result_text:c});case 36:return t.next=38,y.a.send("VKWebAppStorageSet",{key:"karm1",value:JSON.stringify({karma:o,result_text:c})});case 38:return t.prev=38,t.next=41,e.getStoryCanvas();case 41:return i=t.sent,t.next=44,new Promise((function(e){return i.toBlob((function(t){return e(t)}))}));case 44:return d=t.sent,t.next=47,e.uploadStoryPhotoToAlbum(d);case 47:t.next=51;break;case 49:t.prev=49,t.t5=t.catch(38);case 51:case"end":return t.stop()}}),t,null,[[0,5],[8,13],[17,27],[38,49]])})))},"\u0423\u0437\u043d\u0430\u0442\u044c \u043a\u0430\u0440\u043c\u0443 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430")},{icon:this.loadingComponent,title:"\u0418\u0434\u0451\u0442 \u043e\u0446\u0435\u043d\u043a\u0430...",description:l[d]},{icon:this.loadingComponent,title:"\u0410\u043d\u0430\u043b\u0438\u0437 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d!",button:r.a.createElement(w,{onClick:function(){e.shareStory()}},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0430\u043d\u0430\u043b\u0438\u0437 \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438")}],g=r.a.createElement(s.e,{activeModal:o,onClose:function(){return e.setState({activeModal:null})}},r.a.createElement(s.d,{id:"group",onClose:function(){e.setState({subShow:!1,activeModal:null})},icon:r.a.createElement(s.b,{size:72,shadow:!1,src:n(292)}),header:"\u041f\u043e\u043a\u0430 \u0442\u044b \u0436\u0434\u0435\u0448\u044c \u0430\u043d\u0430\u043b\u0438\u0437, \u043f\u043e\u0434\u043f\u0438\u0448\u0438\u0441\u044c \u043d\u0430 \u043d\u0430\u0448 \u043a\u0440\u0443\u0442\u043e\u0439 \u043f\u0430\u0431\u043b\u0438\u043a. \u0422\u0435\u0431\u0435 \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f!",actions:r.a.createElement(w,{onClick:Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.send("VKWebAppJoinGroup",{group_id:v.group_id_join[0],key:"FSDIfulnwje"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:e.setState({subShow:!1,activeModal:null});case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))},"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f")}));return r.a.createElement(s.c,{isWebView:!0},r.a.createElement(s.i,{activePanel:a,popout:c,onSwipeBack:this.back,modal:g},b.map((function(e,t){return r.a.createElement(s.f,{id:"p".concat(t),key:"p".concat(t)},r.a.createElement("div",{className:"FullScreen__Container"},e.icon||r.a.createElement("img",{alt:"icon",src:n(293)("./"+t+".png")}),r.a.createElement("div",{className:"FullScreen__Title"},e.title),e.description&&r.a.createElement("div",{className:"FullScreen__Description"},e.description),e.button),r.a.createElement("img",{alt:"bg",className:"Background",src:n(49)}),h)})),r.a.createElement(s.f,{id:"p7"},r.a.createElement("div",{className:"FullScreen__Container"},r.a.createElement("div",{className:"ButtonsContainer"},[{icon:r.a.createElement(W,null),text:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",onClick:function(){e.go("p5")}}].concat(Object(i.a)([])).map((function(e,t){return r.a.createElement(w,{key:"btn-"+t,before:e.icon,onClick:function(){return e.onClick()},style:{marginTop:t>0&&16}},e.text)})))),r.a.createElement("img",{alt:"bg",className:"Background",src:n(49)})),r.a.createElement(s.f,{id:"p5"},r.a.createElement("div",{className:"FullScreen__Container"},r.a.createElement("div",{className:"TextHeader"},"\u041a\u0430\u0440\u043c\u0430 \u0442\u0432\u043e\u0435\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430:"),r.a.createElement("div",{className:"Karma"},f,"/1000"),r.a.createElement("div",{className:"ResultText"},m),r.a.createElement(w,{className:"FullScreen__Button",onClick:function(){return e.shareStory()}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"),r.a.createElement("img",{alt:"bg",className:"Background",src:n(297)("./".concat(f<=333?"red":f<=667?"yellow":"green",".png"))}))),r.a.createElement(s.f,{id:"sub_app"},r.a.createElement("div",{className:"PosterHeader"},"\u0425\u043e\u0447\u0435\u0448\u044c \u0443\u0437\u043d\u0430\u0442\u044c \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0442\u043e\u0438\u0442 \u0442\u0432\u043e\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0432 \u0412\u041a?"),r.a.createElement("div",{className:"PosterSubheader"},"\u0422\u043e\u0433\u0434\u0430 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438 \u0432 \u043d\u0430\u0448\u0435 ",r.a.createElement("br",null),r.a.createElement("span",{style:{color:"#3AD431"}},"\u043d\u043e\u0432\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435")),r.a.createElement("img",{alt:"poster",className:"PosterImage",src:n(300)}),r.a.createElement("div",{className:"ButtonsContainer"},r.a.createElement(w,{before:r.a.createElement(U,null),onClick:function(){return A("https://vk.com/app7916609")}},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"),r.a.createElement(w,{style:{marginTop:"2.77vh"},before:r.a.createElement(W,null),onClick:function(){return e.setState({activePanel:"p7",history:["p7"]})}},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443")),r.a.createElement("img",{alt:"bg",className:"Background",src:n(49)}))))}},{key:"loadingComponent",get:function(){var e=this.state,t=e.messages,a=e.currentMessageIndex,o=Math.round(100/t.length*(a+1));return r.a.createElement("div",{className:"Progress"},r.a.createElement("span",null,o,r.a.createElement("span",{style:{color:"#3AD431"}},"%")),r.a.createElement("img",{style:{animationPlayState:100===o&&"paused"},alt:"progress",src:n(96)}))}}]),t}(r.a.Component);c.a.render(r.a.createElement(s.a,null,r.a.createElement(H,null)),document.getElementById("root"))},49:function(e,t,n){e.exports=n.p+"static/media/green.5dd55922.png"},96:function(e,t,n){e.exports=n.p+"static/media/progress.31236f30.png"}},[[185,1,2]]]);
//# sourceMappingURL=main.5b0e64f9.chunk.js.map